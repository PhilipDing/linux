webpackJsonp([144],{1e3:function(e,t,s){var r=s(5)(null,s(1609),null,null,null);e.exports=r.exports},1609:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("p",[s("strong",[e._v("semanage命令")]),e._v("是用来查询与修改SELinux默认目录的安全上下文。SELinux的策略与规则管理相关命令："),s("a",{attrs:{href:"#/seinfo",title:"seinfo命令"}},[e._v("seinfo")]),e._v("命令、"),s("a",{attrs:{href:"#/sesearch",title:"sesearch命令"}},[e._v("sesearch")]),e._v("命令、"),s("a",{attrs:{href:"#/getsebool",title:"getsebool命令"}},[e._v("getsebool")]),e._v("命令、"),s("a",{attrs:{href:"#/setsebool",title:"setsebool命令"}},[e._v("setsebool")]),e._v("命令、semanage命令。")]),e._v(" "),s("h3",[e._v("语法")]),e._v(" "),s("pre",{pre:!0},[s("code",{attrs:{"v-pre":""}},[e._v('semanage {[login](#/login "login命令")|user|port|interface|fcontext|translation} -l\nsemanage fcontext -{a|d|m} [-frst] file_spec\n')])]),e._v(" "),s("h3",[e._v("选项")]),e._v(" "),s("pre",{pre:!0},[s("code",{attrs:{"v-pre":""}},[e._v("-l：查询。\nfcontext：主要用在安全上下文方面。\n-a：增加，你可以增加一些目录的默认安全上下文类型设置。\n-m：修改。\n-d：删除。\n")])]),e._v(" "),s("h3",[e._v("实例")]),e._v(" "),s("p",[e._v("查询一下"),s("code",{pre:!0},[e._v("/var/www/html")]),e._v("的默认安全性本文的设置：")]),e._v(" "),s("pre",{pre:!0},[s("code",{attrs:{"v-pre":""}},[e._v('semanage fcontext -l\nSELinux fcontext    [type](#/type "type命令")          Context\n....(前面省略)....\n/var/www(/.*)?      all files     system_u:object_r:httpd_sys_content_t:s0\n....(後面省略)....\n')])]),e._v(" "),s("p",[e._v("如上面例子所示，我们可以查询的到每个目录的安全性本文！而目录的设定可以使用正则表达式去指定一个范围。那么如果我们想要增加某些自定义目录的安全性本文呢？举例来说，我想要色设置"),s("code",{pre:!0},[e._v("/srv/samba")]),e._v("成为 "),s("code",{pre:!0},[e._v("public_content_t")]),e._v("的类型时，应该如何设置呢？")]),e._v(" "),s("p",[e._v("用semanage命令设置"),s("code",{pre:!0},[e._v("/srv/samba")]),e._v("目录的默认安全性本文为"),s("code",{pre:!0},[e._v("public_content_t")]),e._v("：")]),e._v(" "),s("pre",{pre:!0},[s("code",{attrs:{"v-pre":""}},[e._v('[mkdir](#/mkdir "mkdir命令") /srv/samba\nll -Zd /srv/samba\ndrwxr-xr-x  root root root:object_r:var_t    /srv/samba\n')])]),e._v(" "),s("p",[e._v("如上所示，默认的情况应该是"),s("code",{pre:!0},[e._v("var_t")]),e._v("这个咚咚的！")]),e._v(" "),s("pre",{pre:!0},[s("code",{attrs:{"v-pre":""}},[e._v('semanage fcontext -l | [grep](#/grep "grep命令") \'/srv\'\n/srv/.*                     all files   system_u:object_r:var_t:s0\n/srv/([^/]*/)?[ftp](#/ftp "ftp命令")(/.*)?     all files   system_u:object_r:public_content_t:s0\n/srv/([^/]*/)?www(/.*)?     all files   system_u:object_r:httpd_sys_content_t:s0\n/srv/([^/]*/)?[rsync](#/rsync "rsync命令")(/.*)?   all files   system_u:object_r:public_content_t:s0\n/srv/gallery2(/.*)?         all files   system_u:object_r:httpd_sys_content_t:s0\n/srv                        directory   system_u:object_r:var_t:s0   //看这里！\n')])]),e._v(" "),s("p",[e._v("上面则是默认的"),s("code",{pre:!0},[e._v("/srv")]),e._v("底下的安全性本文资料，不过，并没有指定到"),s("code",{pre:!0},[e._v("/srv/samba")]),e._v("。")]),e._v(" "),s("pre",{pre:!0},[s("code",{attrs:{"v-pre":""}},[e._v("semanage fcontext -a -t public_content_t \"/srv/samba(/.*)?\"\nsemanage fcontext -l | grep '/srv/samba'\n/srv/samba(/.*)?            all files   system_u:object_r:public_content_t:s0\n")])]),e._v(" "),s("pre",{pre:!0},[s("code",{attrs:{"v-pre":""}},[e._v('[cat](#/cat "cat命令") /etc/selinux/targeted/contexts/files/file_contexts.local\n# This [file](#/file "file命令") is auto-generated by libsemanage\n# Please use the semanage [command](#/command "command命令") to [make](#/make "make命令") changes\n/srv/samba(/.*)?    system_u:object_r:public_content_t:s0  #写入这个档案\n\n')])]),e._v(" "),s("pre",{pre:!0},[s("code",{attrs:{"v-pre":""}},[e._v('[restorecon](#/restorecon "restorecon命令") -Rv /srv/samba* #尝试恢复默认值\nll -Zd /srv/samba\ndrwxr-xr-x  root root system_u:object_r:public_content_t /srv/samba/  #有默认值，以后用restorecon命令来修改比较简单！\n')])]),e._v(" "),s("p",[e._v("semanage命令的功能很多，这里主要用到的仅有fcontext这个选项的用法而已。如上所示，你可以使用semanage来查询所有的目录默认值，也能够使用它来增加默认值的设置！")])])}]}},412:function(e,t,s){e.exports=s(1e3)}});
//# sourceMappingURL=144.8ba93419a1626890e9b8.js.map